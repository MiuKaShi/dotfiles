#! /bin/bash

paper_notes=~/notes/paper_notes
day_notes=~/notes/day_notes

title=${1%.*}
title=${title:-"$(echo | dmenu -p "notes title:")"}
[[ -z "$title" ]] && exit 1
create-md() {
    id=$(date '+%Y%m%d%H%M%S')
    file=$day_notes/$id.md
    cat >"$file" <<EOF
---
id: "$id"
aliases:
  - "$title"
tags: []
---

# $title
EOF
}

file=$(grep "\"$title"\" $paper_notes/*.md | cut -d':' -f1)
[[ -z "$file" ]] && create-md
st -e nvim "$file"
