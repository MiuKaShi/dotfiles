#!/bin/sh

# Get the absolute path of the input file
input_file=$(readlink -f "$1")

# Extract the filename and directory from the input file path
filename=$(basename "$input_file")
filename_without_extension="${filename%.*}"
directory=$(dirname "$input_file")

# Change to the directory of the input file
cd "$directory" || exit 1

# Check if the HTML file already exists
if [ ! -f "$filename_without_extension.html" ]; then
    notify-send -t 3000 "ViewBib" "Bib HTML created"
else
    notify-send -t 3000 "ViewBib" "Bib HTML updated"
fi

# Convert the BibTeX file to HTML using bibtex2html
bibtex2html -s amsplain -noheader -nofooter -nokeywords -nobibsource -css ~/.config/bibtex3html/style.css "$input_file"

# Open the resulting HTML file in the default web browser
xdg-open "$filename_without_extension.html"
