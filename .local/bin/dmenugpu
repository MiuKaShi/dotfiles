#!/bin/sh

# A dmenu wrapper script for system functions.
export WM="dwm"
case "$(readlink -f /sbin/init)" in
	*systemd*) ctl='systemctl' ;;
	*) ctl='loginctl' ;;
esac

boot(){
    case "$(printf "ğŸ”ƒ Now\nâ° Later" | dmenu -i -p "Reboot:")" in
        'ğŸ”ƒ Now') $ctl reboot -i ;;
        'â° Later') notify-send "ğŸ–¥ GPU module " "Wait to reboot" ;;
    esac
}

case "$(printf "ğŸ’» Intel\nâœ¨ Hybrid\nğŸš€ Nvidia" | dmenu -i -p "Select GPU Mode:")" in
	'ğŸ’» Intel') sudo envycontrol -s integrated && boot ;;
	'âœ¨ Hybrid') sudo envycontrol -s hybrid && boot ;;
	'ğŸš€ Nvidia') sudo envycontrol -s nvidia && boot ;;
esac
