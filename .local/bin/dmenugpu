#!/bin/sh

# A dmenu wrapper script for system functions.
export WM="dwm"
case "$(readlink -f /sbin/init)" in
	*systemd*) ctl='systemctl' ;;
	*) ctl='loginctl' ;;
esac

boot(){
    case "$(printf "🔃 Now\n⏰ Later" | dmenu -i -p "Reboot:")" in
        '🔃 Now') $ctl reboot -i ;;
        '⏰ Later') notify-send "🖥 GPU module " "Wait to reboot" ;;
    esac
}

case "$(printf "💻 Intel\n✨ Hybrid\n🚀 Nvidia" | dmenu -i -p "Select GPU Mode:")" in
	'💻 Intel') sudo envycontrol -s integrated && boot ;;
	'✨ Hybrid') sudo envycontrol -s hybrid && boot ;;
	'🚀 Nvidia') sudo envycontrol -s nvidia && boot ;;
esac
