#!/bin/sh

# Need https://github.com/straicat/lpic

# Set variables
FILE=$(readlink -f "$2")
LPIC_MAIN=$XDG_CONFIG_HOME/script/lpic/main.py

# Define functions
upload_web() {
    python "$LPIC_MAIN" web && notify-send -t 3000 "picture" "Web manage"
}

delete_image() {
    python "$LPIC_MAIN" del
}

upload_image() {
    python "$LPIC_MAIN" put "$FILE" -y && notify-send -t 3000 "picture" "upload successfully"
}

upload_clipboard() {
    xclip -selection clipboard -t image/png -o >/tmp/src.png
    python "$LPIC_MAIN" put /tmp/src.png -y
    notify-send -t 3000 "Picture" "Upload successfully"
    rm -rf /tmp/src.png
}

# Main script
case "$1" in
    "-w") upload_web ;;
    "-d") delete_image ;;
    "-c") upload_clipboard ;;
    "-p") upload_image ;;
esac
