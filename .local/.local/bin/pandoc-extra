#!/bin/bash

file=$(readlink -f "$1")

pandoc "$file" \
    -f markdown \
    --pdf-engine=tectonic \
    --mathjax \
    --template=notes \
    --metadata-file="/home/miuka/.local/share/pandoc/style/notes.yaml" \
    --include-in-header="/home/miuka/.local/share/pandoc/style/notes.tex" \
    --lua-filter=infobox.lua \
    --lua-filter=diagram-generator.lua \
    --metadata=javaPath:/usr/bin/java \
    --metadata=plantumlPath:/home/miuka/.config/script/plantuml.jar \
    --filter=pandoc-crossref \
    --citeproc \
    --bibliography="$BIB" \
    --csl="$CSL" \
    -t pdf "${@:2}"
