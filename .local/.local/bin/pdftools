#!/bin/sh

# need pdfcpu

# Set variables
file=$(readlink -f "$1")

# Define functions
remove_pages() {
    num=$(echo | dmenu -p "Pages:")
    pdfcpu pages remove -p "$num" "$file"
    notify-send -t 3000 "Remove Page $num"
}

delete_pdf() {
    trash "$file"
    notify-send -t 3000 "Delete PDF!"
}

extract_pages() {
    pages=$(echo | dmenu -p "pages:")
    pdfcpu extract -m page -p "$pages" "$file" $HOME/Downloads
    notify-send -t 3000 "Extract successfully"
}

rotate_pages() {
    pages=$(echo | dmenu -p "rotae:")
    angle=$(echo | dmenu -p "angle:")
    pdfcpu rotate -p "$pages" "$file" "$angle"
    notify-send -t 3000 "Rotate successfully"
}

annotation_remove() {
    pages=$(echo | dmenu -p "annotation(remove page):")
    pdfcpu annotations remove -p "$pages" "$file"
    notify-send -t 3000 "Remove successfully"
}

# Prompt user for action
action=$(printf "remove pages\nextract pages\nrotate pdf\ndelete pdf" | dmenu -l 6 -i -p "Pdf tools:")

# Call appropriate function based on user input
case "$action" in
    "remove pages") remove_pages ;;
    "extract pages") extract_pages ;;
    "rotate pdf") rotate_pages ;;
    "annotation remove") annotation_remove ;;
    "delete pdf") delete_pdf ;;
esac
