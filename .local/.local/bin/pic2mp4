#!/bin/sh

# Converts a sequence of images to an MP4 video using FFmpeg.

# Parameters:
# $1: Frames per second (FPS)
# $2: Image file type (e.g. jpg, png, bmp)
# $3: Start number
# $4: End number

convert_images_to_video() {
    local fps="$1"
    local type="$2"
    local start="$3"
    local end="$4"

    ffmpeg -r "$fps" \
        -f image2 \
        -start_number "$start" \
        -i "%d.$type" \
        -vframes "$end" \
        -vcodec libx264 \
        -crf 25 \
        "vid-$start-$end.mp4"
    # -pix_fmt yuv420p \
}

# Prompt the user for input.
fps=$(printf "24\n25\n60\n12" | dmenu -p "Choose FPS:")
type=$(printf "jpg\npng\nbmp" | dmenu -p "Choose file type:")
start=$(echo | dmenu -p "Enter start number:")
end=$(echo | dmenu -p "Enter end number:")

# Convert the images to a video.
convert_images_to_video "$fps" "$type" "$start" "$end"
