#!/bin/bash

HOSTNAME=$(cat ~/.rdphosts | awk '{print $1}' | dmenu -i -p "Please Select Host") || exit 0

HOSTINFO=$(cat ~/.rdphosts | grep $HOSTNAME)

SCALE=$(printf "180\n140\n100" | dmenu -p "Choose Scale:")

read IP NET USER PASS <<<$(echo $HOSTINFO | awk '{print $2, $3, $4, $5}')

HOME="/home/$(whoami)"

xfreerdp \
    /dynamic-resolution \
    +clipboard \
    +fonts \
    +aero \
    +window-drag \
    +menu-anims \
    +glyph-cache \
    -compression \
    -themes \
    /bpp:32 \
    /scale:$SCALE \
    -grab-keyboard \
    /gfx:rfx,avc420,avc444 \
    /rfx-mode:video \
    /gdi:hw \
    /cert-ignore \
    /auto-reconnect \
    /auto-reconnect-max-retries:3 \
    /audio-mode:0 \
    /sound:sys:pulse \
    /u:$USER /v:$IP /p:$PASS /network:$NET /drive:home,$HOME &
# /f \
# /log-level:OFF \
