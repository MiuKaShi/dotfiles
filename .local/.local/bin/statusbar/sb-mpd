#!/bin/bash

case $BLOCK_BUTTON in
    1) mpc toggle ;; # pause/unpause
    2) setsid -f "$TERMINAL" -e ncmpcpp ;;
    3) notify-send "üéµ Music module" "\- Click to toggle
‚èØÔ∏è : Playing
‚è∏Ô∏è : Paused
" ;;
    6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

INFO=$(mpc status)
if [[ -n "$INFO" && $(echo "$INFO" | wc -l) -gt 2 ]]; then
    PLAYING=$(mpc current | awk -F':' '{print $NF}' | awk '{$1=$1};1')
    TITLE=$([[ ${#PLAYING} -gt 40 ]] && echo "$(echo "$PLAYING" | cut -c -40)..." || echo "$PLAYING")
    if [[ "$INFO" == *"[playing]"* ]]; then
        echo "‚èØÔ∏è $TITLE"
    else
        echo "‚è∏Ô∏è $TITLE"
    fi
fi
