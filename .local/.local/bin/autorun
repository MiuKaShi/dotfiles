#!/bin/bash

# Function for starting conky based on monitor model
start_conky() {
    local monitor_model=$(sudo ddcutil detect | grep "Mfg" | awk '{print $3}')
    case $monitor_model in
        *"ENC"*)
            conky -c ~/.config/conky/lab/.conkyrc >>/dev/null 2>&1 &
            notify-send -t 1000 "Conky" "Conky started!"
            ;;
        *"PHL"* | *"HKC"*)
            conky -c ~/.config/conky/home/.conkyrc >>/dev/null 2>&1 &
            notify-send -t 1000 "Conky" "Conky started!"
            ;;
    esac
}

# Switch statement for calling different commands
case $1 in
    picom)
        if pgrep -x picom >/dev/null; then
            killall picom
        else
            picom --experimental-backends >>/dev/null 2>&1 &
        fi
        ;;
    easyeffects)
        if pgrep -x easyeffects >/dev/null; then
            easyeffects
        else
            easyeffects --gapplication-service >>/dev/null 2>&1 &
        fi
        ;;
    aria2)
        if pgrep -x aria2c >/dev/null; then
            st -e aria2p >>/dev/null 2>&1 &
        else
            aria2c --conf-path "$HOME"/.config/aria2/server.conf >>/dev/null 2>&1 &
        fi
        ;;
    sxhkd)
        if pgrep -x sxhkd >/dev/null; then
            killall sxhkd
        else
            sxhkd >>/dev/null 2>&1 &
        fi
        ;;
    textsearch)
        if pgrep -x recoll >/dev/null; then
            killall recoll
        else
            recoll >>/dev/null 2>&1 &
        fi
        ;;
    megasync)
        export DO_NOT_SET_DESKTOP_SETTINGS_UNAWARE=1
        export DO_NOT_UNSET_QT_QPA_PLATFORMTHEME=1
        megasync >>/dev/null 2>&1 &
        ;;
    translator)
        export GDK_DPI_SCALE=1.5
        ldr >>/dev/null 2>&1 &
        ;;
    conky)
        if pgrep -x conky >/dev/null; then
            killall conky
        else
            start_conky
        fi
        ;;
    vmware)
        sudo modprobe -a vmw_vmci vmmon vmxnet3
        vmware >>/dev/null 2>&1 &
        ;;
esac
