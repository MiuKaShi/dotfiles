##⇘⇘基本说明：
##对大多数选项加入了中文注释说明
##行首存在注释符"#"，代表此项处于不启用状态（即恢复MPV的默认设置状态），删去即启用
##注释内容解释 —— # <可选值> [条件要求] 参数意义说明 （补充）
##部分选项之间有关联作用，MPV读取参数时由上往下读，所以注意书写通用参数的顺序，可查看手册[02]的顺序逻辑部分的错误示范

include          = "~~/profiles.conf"       # 该参数用于追加读取额外的设置文件。原配置预设组已被分离到该文件中
use-filedir-conf = yes                      # 允许使用特定文件的设置文件 https://mpv.io/manual/master/#file-specific-configuration-files

########
# 基础 #
########

hwdec=auto
hwdec-codecs=all

########
# 功能 #
########

# input-ipc-server       = mpvpipe     # [使用SVP Manager时必须开启此项] IPC支持
input-builtin-bindings = no          # 禁用mpv初始的快捷键方案（只使用 input.conf 中的设定）
pause                  = no         # 以暂停状态启动播放器
panscan                = 0         # <0.0-1.0> 裁切横向画面以充满窗口（建议配合 keepaspect-window=no 使用）
loop                   = inf         # <N|inf|默认no> 始终循环播放当前文件
loop-playlist          = no          # <N|inf|force|默认no> 播放列表循环
hr-seek-framedrop      = no          # [SVP补帧时推荐设置为no] 跳转时丢帧，关闭利于修正音频延迟
save-position-on-quit  = yes         # 退出时记住播放状态
watch-later-options    = vid,aid,sid


# 隐藏窗口标题栏
border=no

# 对终端中的日志进行着色
msg-color=yes
#msg-level=vo=fatal

# 播放结束后不退出
keep-open=yes

# 在终端中显示进度条
term-osd-bar=yes

# 自动隐藏鼠标超时（ms）
cursor-autohide=1000

# 仅在全屏模式下隐藏鼠标
cursor-autohide-fs-only 

#######
# OSD #
#######
##⇘⇘OSD 即 On-Screen-Display ，通常为屏幕上弹出显示的信息。 OSC 即 on-screen-controller ，MPV中指的是简易操控界面
##更多自定义查询 https://mpv.io/manual/master/#osd

osd-on-seek              = msg-bar     # <no,bar,msg,msg-bar> 在跳转时间轴时显示的信息类型
#osd-blur                 = 0
osd-bar-w                = 100
osd-bar-h                = 1
osd-bar-align-y          = -1
#osd-color                = "#B300FFFF"
#osd-border-color         = "#B3008B8B"
osd-border-size          = 1
osd-font-size            = 40          # 更改OSD字体大小（全局，影响多个功能显示的文本），默认 55
osd-fractions            = yes         # 以秒为单位显示OSD时间（毫秒精度），有助于查看视频帧的确切时间戳
osd-playing-msg          = "${filename}"
osd-duration             = 2000        # 设置（全局）OSD文本信息的持续时间（毫秒），默认 1000

########
# 视频 #
########
##⇘⇘色彩管理

#icc-profile-auto            = yes               # 如果做过专业校色应开启（系统目录存在对应的icm校色文档）。未做校色的广色域屏应手动指定 --target-prim
#icc-profile                 = "X:/xxx/xxxx.icm"
#icc-3dlut-size              = <r>x<g>x<b>       # <2-512> 从ICC配置文件的每个维度生成的3D LUT的大小。默认 64x64x64
#icc-force-contrast          = inf               # <no|0-1000000|inf> 强制指定ICC的静态对比度而不是使用配置文件的内设（可能存在测量错误）。默认 no
#target-prim                 = auto              # 当不使用ICC颜色管理时，视频颜色将适应此颜色空间

##⇘⇘音视频同步模式。只需注释掉 --video-sync 即可恢复MPV的默认同步模式

video-sync                  = display-resample  # 类"ReClock"作用，更改为与视频帧与显示器刷新率同步，自动调节音频速度补偿偏移
video-sync-max-video-change = 5                 # [仅当 --video-sync=display-xxxx 时生效] 默认 1
interpolation               = yes               # [仅当 --video-sync=display-xxxx 时生效] 减少由于视频帧率fps和显示刷新率hz不匹配而引起的卡顿/抖动
tscale                      = linear            # [仅当 --interpolation=yes 时生效] 时间插值算法（帧混合，非光流法）
# 视频缓冲大小（4k可适当调大）
demuxer-max-bytes = 150MiB

##⇘⇘“画质”相关
##避免简单粗暴的使用 --profile=gpu-hq ，原因见手册 [02]

#cscale                      = ewa_lanczos       # 色度还原算法；可由更好的 "KrigBilateral.glsl" 着色器取代。默认 bilinear
scale                       = catmull_rom       # 放大算法，默认值同上
#dscale                      = lanczos           # 缩小算法。若不设定，则自动采用 --scale 的值
##所有可用的内置算法参见手册 [06]

#linear-upscaling            = yes               # [须 --fbo-format 指定16位及以上的精度；与 --sigmoid-upscaling 不兼容] （对HDR内容无影响）
sigmoid-upscaling           = yes               # [与 --linear-upscaling 不兼容] 放大时非线性的颜色转换，可避免强振铃伪影
##开发者建议要么优先使用 --sigmoid-upscaling ，要么以上两项干脆都不用
#linear-downscaling          = yes               # [使用"SSimDownscaler.glsl"时须关闭；须 --fbo-format 指定16位及以上的精度] （对HDR内容无影响）
##上两项 --linear- 的参数对应MADVR中的"scale in linear light"，在缩小算法中线性处理可以提升颜色对比度的精确性
#correct-downscaling         = yes               # [当 --dscale=bilinear 时此项无效] 增强缩小算法的质量，对于异形比例视频可能产生微小失真
#scaler-resizes-only         = no                # 当未进行缩放处理时，使用bilinear算法完美还原。默认 yes
dither-depth                = auto              # <N|no|auto> 是否开启色深抖动弥补色彩转换损失。8位显示器写8，10位显示器写10，auto的值取决于 --gpu-api 不一定正确
#dither                      = error-diffusion   # <默认fruit|ordered|error-diffusion|no> 色深抖动的算法；值 no 等效 --dither-depth=no
#deband                      = yes               # 去色带。可能受硬解码影响实际效果
#profile                     = DeBand+           # 备选的去色带方案，具体参数见 "profiles.conf" 中的同名配置预设
#profile                     = SWscaler          # 备选的软件缩放器方案，具体参数见 "profiles.conf" 中的同名配置预设

####################
# 脚本 滤镜 着色器 #
####################

##以下都可选择在此处开启，即默认每次随播放器启动；或者使用"input.conf"中的方案手动选择加载

##⇘⇘脚本部分

##内置脚本开关（如果没有必要的目的，那就不要屏蔽mpv内建的功能）
#load-auto-profiles      = no   # <yes|no|默认auto> 新版条件配置预设（使用旧版外挂的用户记得禁用）
#load-osd-console        = no   # 控制台
#load-stats-overlay      = no   # 统计信息
osc                     = no   # [使用部分同类脚本的前置条件] 禁用原OSC（即内置的"osc.lua"脚本）以兼容第三方的界面样式
#ytdl                    = no   # 网址解析增强
#ytdl-raw-options-append = cookies=[D:/cookies.txt]

#load-scripts       = no        # 自动挂载 /scripts/ 目录中的所有外置脚本，默认 yes。设置为no时可用下一行示例的命令加载指定的外置脚本
#scripts            = "~~/scripts/load_plus.lua;~~/scripts/playlistmanager.lua"


##⇘⇘滤镜部分
##设定随MPV启动的音/视频滤镜的书写格式（支持多项） --af/vf=滤镜①=参数❶=值:参数❷=值,滤镜②...
## --af 和 --vf 仅能各存在一条。如果不想只使用这条参数，可以拆开写，例如使用 --vf-append 单项多次追加更多的滤镜，并不会覆盖 --vf 指定的滤镜
##更多实用向的滤镜可参考 https://github.com/hooke007/MPV_lazy/discussions/120

#vf-append = format=gamma=gamma2.2 # MPV校色曲线目标是BT.1886，此视频滤镜用于回归常见的显示器标准 https://github.com/mpv-player/mpv/issues/8009
##VS脚本实际以视频滤镜的形式在MPV中工作（建议编辑脚本文件中的参数以适配实际机器）。正常情况补帧类的滤镜不要同时启用多个
#vf-append = vapoursynth="~~/vs/mvtools-2x.vpy" # mvtools补帧脚本倍帧版
# vf-append = vapoursynth="~~/vs/svpflow-2x.vpy" # svpflow补帧脚本倍帧版（非SVP Manager程序）


##⇘⇘着色器部分
##此处的 --glsl-shaders 用于指定每次随MPV共同启动的着色器（支持多项）。更多详细着色器信息参见 系列手册[01]
##--glsl-shaders-append 等效 --glsl-shader （注意和上行中参数的区别），表示追加着色器（单次仅能追加一项），并不会覆盖第一条 --glsl-shaders 指定的着色器，可无限追加该命令。

##初始加载多个着色器的示例写法
#glsl-shaders         = "~~/shaders/Anime4K_Clamp_Highlights.glsl;~~/shaders/Anime4K_Restore_CNN_M.glsl;~~/shaders/Anime4K_Upscale_CNN_x2_S.glsl"

##下接的逐个单项 --glsl-shaders-append （或 --glsl-shader ） 会依次排列在 --glsl-shaders 之后，当然你也可以不写 --glsl-shaders 只用前二者的队列
#glsl-shaders-append  = "~~/shaders/KrigBilateral.glsl"
#glsl-shaders-append  = "~~/shaders/AMD-FSR-EASU_luma.glsl"

# ================ 字幕 ================
# 匹配字幕 
sub-auto=fuzzy
sub-file-paths=subs
slang=chs,sc,zh,chi,zho
sub-back-color="#641C1C1C" # <格式为(AA)RRGGBB> 设定纯文本字幕的背景色
#字幕加粗，以提升可读性
#sub-bold=yes
##高级字幕部分 —— SSA ASS
sub-ass-force-margins = yes         # [当 --blend-subtitles=yes/video 时无效] 使ASS字幕尽可能输出在黑边上
# ================ 截图 ================
screenshot-format             = png  # <默认 jpg|(同前)jpeg|png|webp|jxl>
screenshot-jpeg-quality       = 100  # <0-100> JPEG的质量，默认 90
screenshot-jpeg-source-chroma = no   # 用与源视频相同的色度半采样写入JPEG，默认 yes
screenshot-png-compression    = 5    # <0-9> PNG压缩等级，过高的等级影响性能，默认 7
#screenshot-png-filter         = 0    # <0-5> PNG的压缩过滤器。默认值 5 即可实现最佳压缩率
screenshot-webp-lossless      = yes  # 无损WEBP，默认 no
screenshot-webp-quality       = 100  # <0-100> [当 --screenshot-webp-lossless=no 时生效] 有损WEBP的质量，默认 75
screenshot-webp-compression   = 3    # <0-6> WEBP压缩等级，使用有损WEBP时进一步降低图片质量，默认 4
#screenshot-tag-colorspace     = yes  # 使用适当的色彩空间标记屏幕截图（并非所有格式受支持）默认 no
#screenshot-high-bit-depth     = no   # 主要影响PNG/JXL，尽可能使用和视频输出时近似的位深，默认 yes
#screenshot-template           = "~~desktop/MPV-%P-N%n"
#screenshot-directory          = "~~desktop/"

script-opts=ytdl_hook-ytdl_path=/home/miuka/.local/bin/ytdl-wrapper


# profile=svp # Enable svp by default, here in the "top-level" of mpv.conf

# [svp]                               # SVP profile
# input-ipc-server=/tmp/mpvsocket     # Receives input from SVP
# hr-seek-framedrop=no                # Fixes audio desync
# resume-playback=no                  # Not compatible with SVP

# Can fix stuttering in some cases, in other cases probably causes it. Try it if you experience stuttering.
#opengl-early-flush=yes
